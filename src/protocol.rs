use std::io::Read;

use crate::util::read_varint;

pub struct PacketHeader {
    pub _length: i32,
    pub _id: i32,
}

pub fn read_header<R: Read>(r: &mut R) -> PacketHeader {
    PacketHeader {
        _length: read_varint(r),
        _id: read_varint(r),
    }
}

pub const fn mc_version(protocol_version: i32) -> &'static str {
    match protocol_version {
        770 => "1.21.5",
        769 => "1.21.4",
        768 => "1.21.3",
        767 => "1.21.1",
        766 => "1.20.6",
        765 => "1.20.4",
        764 => "1.20.2",
        763 => "1.20.1",
        762 => "1.19.4",
        761 => "1.19.3",
        760 => "1.19.2",
        759 => "1.19",
        758 => "1.18.2",
        757 => "1.18.1",
        756 => "1.17.1",
        755 => "1.17",
        754 => "1.16.5",
        753 => "1.16.3",
        751 => "1.16.2",
        736 => "1.16.1",
        735 => "1.16",
        578 => "1.15.2",
        575 => "1.15.1",
        573 => "1.15",
        498 => "1.14.4",
        490 => "1.14.3",
        485 => "1.14.2",
        480 => "1.14.1",
        477 => "1.14",
        404 => "1.13.2",
        401 => "1.13.1",
        393 => "1.13",
        340 => "1.12.2",
        338 => "1.12.1",
        335 => "1.12",
        316 => "1.11.2",
        315 => "1.11",
        210 => "1.10.2",
        110 => "1.9.4",
        109 => "1.9.2",
        108 => "1.9.1",
        107 => "1.9",
        47 => "1.8.9",
        5 => "1.7.10",
        4 => "1.7.5",
        3 => "1.7",
        _ => "unknown",
    }
}

pub const fn mc_version_legacy(protocol_version: u8) -> &'static str {
    match protocol_version {
        78 => "1.6.4",
        74 => "1.6.2",
        73 => "1.6.1",
        61 => "1.5.2",
        60 => "1.5.1",
        51 => "1.4.7",
        49 => "1.4.5",
        47 => "1.4.2",
        39 => "1.3.2",
        29 => "1.2.5",
        28 => "1.2.3",
        23 => "1.1",
        22 => "1.0.1",
        21 => "b1.9-pre5",
        20 => "b1.9-pre4",
        19 => "b1.9-pre3",
        18 => "b1.9-pre1",
        17 => "b1.8.1",
        14 => "b1.7.3",
        13 => "b1.6.6",
        11 => "b1.5",
        10 => "b1.4",
        9 => "b1.3",
        8 => "b1.2",
        7 => "b1.1",
        _ => "unknown",
    }
}
